[
  {
    "id": "layout_myi4a0pb",
    "label": "layout_myi4a0pb",
    "module": "$template",
    "component": "layout_myi4a0pb",
    "items": [
      {
        "id": "default",
        "component": "",
        "items": [
          {
            "id": "icon3",
            "component": "WdIcon",
            "attributes": {
              "name": "chevronleft",
              "style": {
                "top": "40px",
                "left": "20px",
                "color": "rgb(255, 255, 255)",
                "position": "fixed"
              }
            },
            "directives": {
              ":if": true
            },
            "extra": {
              "staticResourceAttribute": [
                "src"
              ],
              "attributeExtraData": {}
            }
          },
          {
            "id": "modal1",
            "label": "金豆弹窗",
            "component": "WdModal",
            "attributes": {
              "closeType": [
                "mask"
              ],
              "defaultMaskShow": true,
              "defaultShow": false,
              "position": "bottom",
              "template": "default",
              "style": {
                "padding": "16px 16px 80px",
                "maxHeight": "70%"
              }
            },
            "items": [
              {
                "id": "headerSlot",
                "component": "",
                "attributes": {},
                "items": [
                  {
                    "id": "container4",
                    "component": "Container",
                    "items": [
                      {
                        "id": "text5",
                        "label": "弹窗标题",
                        "component": "WdText",
                        "attributes": {
                          "level": "title-8",
                          "maxLines": "1",
                          "text": "我的余额：66金豆",
                          "style": {
                            "fontWeight": "bolder",
                            "marginBottom": "2px"
                          }
                        },
                        "directives": {
                          ":if": true
                        },
                        "extra": {
                          "attributeExtraData": {}
                        }
                      },
                      {
                        "id": "text6",
                        "component": "WdText",
                        "attributes": {
                          "level": "body-md",
                          "maxLines": "1",
                          "text": "解锁本集需 99 金豆",
                          "style": {
                            "color": "rgb(151, 163, 183)"
                          }
                        },
                        "directives": {
                          ":if": "!!$w.page.dataset.state.modalInfo?.desc",
                          ":display": "!!$w.page.dataset.state.modalInfo?.desc"
                        },
                        "extra": {
                          "attributeExtraData": {}
                        }
                      }
                    ],
                    "directives": {
                      ":if": true
                    },
                    "extra": {}
                  }
                ],
                "directives": {
                  ":if": false
                },
                "extra": {}
              },
              {
                "id": "contentSlot",
                "component": "",
                "items": [
                  {
                    "id": "container6",
                    "component": "Container",
                    "attributes": {
                      "style": {
                        "display": "flex",
                        "alignItems": "center",
                        "flexDirection": "row"
                      }
                    },
                    "items": [
                      {
                        "id": "text11",
                        "component": "WdText",
                        "attributes": {
                          "level": "body-lg",
                          "maxLines": "1",
                          "text": "我的余额：",
                          "style": {
                            "fontWeight": "bolder"
                          }
                        },
                        "directives": {
                          ":if": true
                        },
                        "extra": {
                          "attributeExtraData": {}
                        }
                      },
                      {
                        "id": "text12",
                        "component": "WdText",
                        "attributes": {
                          "level": "body-lg",
                          "maxLines": "1",
                          ":text": "$w.queryBalance.data?.records?.[0]?.balance || 0",
                          "style": {
                            "color": "var(--wd-color-error)",
                            "fontWeight": "bolder",
                            "marginRight": "10px"
                          }
                        },
                        "directives": {
                          ":if": true
                        },
                        "extra": {
                          "attributeExtraData": {}
                        }
                      },
                      {
                        "id": "text13",
                        "component": "WdText",
                        "attributes": {
                          "level": "body-lg",
                          "maxLines": "1",
                          "text": "金豆",
                          "style": {
                            "fontWeight": "bolder",
                            "marginRight": 4
                          }
                        },
                        "directives": {
                          ":if": true
                        },
                        "extra": {
                          "attributeExtraData": {}
                        }
                      }
                    ],
                    "directives": {
                      ":if": true
                    },
                    "extra": {}
                  },
                  {
                    "id": "container7",
                    "component": "Container",
                    "attributes": {
                      "style": {
                        "display": "flex",
                        "alignItems": "center",
                        "flexDirection": "row"
                      }
                    },
                    "items": [
                      {
                        "id": "text14",
                        "component": "WdText",
                        "attributes": {
                          "maxLines": "1",
                          ":text": "`解锁第 ${$w.page.dataset.state.videoListShow?.series_number} 集需要 ${$w.page.dataset.state.videoListShow?.video_id?.recharge_gold_count} 金豆（虚拟商品不退换）`"
                        },
                        "directives": {
                          ":if": true
                        },
                        "extra": {
                          "attributeExtraData": {}
                        }
                      }
                    ],
                    "directives": {
                      ":if": true
                    },
                    "extra": {}
                  },
                  {
                    "id": "container5",
                    "component": "Container",
                    "attributes": {
                      "data": {},
                      "style": {
                        "display": "flex",
                        "alignItems": "center",
                        "flexDirection": "column"
                      }
                    },
                    "items": [
                      {
                        "id": "icon5",
                        "component": "WdIcon",
                        "attributes": {
                          "name": "td:lock-off",
                          "style": {
                            "color": "rgb(145, 114, 235)",
                            "margin": "30px 0px",
                            "fontSize": "40px"
                          }
                        },
                        "directives": {
                          ":if": true
                        },
                        "extra": {
                          "staticResourceAttribute": [
                            "src"
                          ],
                          "attributeExtraData": {}
                        }
                      },
                      {
                        "id": "text7",
                        "component": "WdText",
                        "attributes": {
                          "level": "body-lg",
                          "maxLines": "1",
                          "text": "由于相关规范，IOS下该功能暂不可用",
                          "style": {
                            "color": "rgb(145, 114, 235)",
                            "textAlign": "center"
                          }
                        },
                        "directives": {
                          ":if": true
                        },
                        "extra": {
                          "attributeExtraData": {}
                        }
                      }
                    ],
                    "directives": {
                      ":if": "$w.app.dataset.state.isIOS"
                    },
                    "extra": {
                      "attributeExtraData": {}
                    }
                  },
                  {
                    "id": "listView1",
                    "component": "ListView",
                    "attributes": {
                      "bindConnectMetadata": {},
                      "connectorMethod": {},
                      ":dataSourceData": "$w.queryCharge.data?.records",
                      "dataSourceType": "expression",
                      "datasource": {
                        "name": "splblylian_siru6bh",
                        "type": "datamodal",
                        "extra": {
                          "params": {},
                          "viewId": "view-4qoqvk2jyo",
                          "methodName": "wedaGetRecords"
                        }
                      },
                      "emptyText": "暂无数据",
                      "enableTotal": false,
                      "exprToFieldsSchema": "06744e9f",
                      "isSetStatus": true,
                      "isSupportApis": false,
                      "loadCompletedText": "",
                      "orderType": "asc",
                      "pageSize": 10,
                      "pagination": "none",
                      "queryCondition": [],
                      "template": "cardList",
                      "style": {
                        "padding": "8PX 0PX",
                        "overflowX": "hidden"
                      }
                    },
                    "items": [
                      {
                        "id": "grid2",
                        "component": "Grid",
                        "attributes": {
                          "gutterX": "16px",
                          "gutterY": "16px",
                          "style": {
                            "width": "100%",
                            "padding": "8PX 0PX"
                          }
                        },
                        "items": [
                          {
                            "id": "row2",
                            "component": "Row",
                            "attributes": {
                              "alignItems": "stretch",
                              "colCount": 12,
                              "gutterX": "16px"
                            },
                            "items": [
                              {
                                "id": "repeater1",
                                "component": "Repeater",
                                "attributes": {
                                  ":data": "$w.listView1.records",
                                  "forIndex": "index_listView1",
                                  "forItem": "item_listView1",
                                  "key": "_id",
                                  "suffix": "listView1"
                                },
                                "items": [
                                  {
                                    "id": "col2",
                                    "component": "Col",
                                    "attributes": {
                                      "alignSelf": "auto",
                                      "lgWidthType": {
                                        "type": "twelve-adjust",
                                        "unit": "px",
                                        "value": "2"
                                      },
                                      "widthType": {
                                        "type": "twelve-adjust",
                                        "unit": "px",
                                        "value": "6"
                                      },
                                      "style": {
                                        "gap": "8PX",
                                        "display": "flex",
                                        "flexDirection": "column"
                                      }
                                    },
                                    "items": [
                                      {
                                        "id": "container9",
                                        "component": "Container",
                                        "attributes": {
                                          "style": {
                                            "gap": "4PX",
                                            "width": "100%",
                                            "display": "flex",
                                            "padding": "28px 18px 20px",
                                            "overflow": "hidden",
                                            "position": "relative",
                                            "wordBreak": "break-all",
                                            "alignItems": "flex-start",
                                            "borderRadius": "6px",
                                            "flexDirection": "column"
                                          }
                                        },
                                        "items": [
                                          {
                                            "id": "text8",
                                            "component": "WdText",
                                            "attributes": {
                                              "maxLines": "1",
                                              ":text": "$w.app.dataset.state.chargeStyle[$w.item_listView1.type]?.tag || ($w.item_listView1.is_super ? '特惠' : '')",
                                              "style": {
                                                "top": "0px",
                                                "left": "0px",
                                                "color": "rgb(107, 46, 11)",
                                                "padding": "2px 6px",
                                                "fontSize": "12px",
                                                "position": "absolute",
                                                "background": "rgb(252, 224, 152)",
                                                "borderRadius": "6px 2px 2px"
                                              }
                                            },
                                            "directives": {
                                              ":if": "$w.app.dataset.state.chargeStyle[$w.item_listView1.type]?.tag || $w.item_listView1.is_super",
                                              ":display": "$w.app.dataset.state.chargeStyle[$w.item_listView1.type]?.tag || $w.item_listView1.is_super"
                                            },
                                            ":style": "({\n  background: $w.app.dataset.state.chargeStyle[$w.item_listView1.type]?.tagBackColor || '#FCE098',\n  color: $w.app.dataset.state.chargeStyle[$w.item_listView1.type]?.tagColor || '#6B2E0B'\n})",
                                            "extra": {
                                              "attributeExtraData": {}
                                            }
                                          },
                                          {
                                            "id": "container10",
                                            "component": "Container",
                                            "attributes": {
                                              "data": {},
                                              "style": {
                                                "zIndex": 1,
                                                "display": "flex",
                                                "position": "relative",
                                                "alignItems": "center"
                                              }
                                            },
                                            "items": [
                                              {
                                                "id": "text18",
                                                "component": "WdText",
                                                "attributes": {
                                                  "level": "title-7",
                                                  "maxLines": "1",
                                                  ":text": "`¥ ${$w.item_listView1.amount || '-'}`"
                                                },
                                                "directives": {
                                                  ":if": true
                                                },
                                                ":style": "({\n  color: $w.app.dataset.state.chargeStyle[$w.item_listView1.type]?.color || ($w.item_listView1.is_super ? 'var(--wd-color-text-inverse)' : 'var(--wd-color-text-second)')\n})",
                                                "extra": {
                                                  "attributeExtraData": {}
                                                }
                                              },
                                              {
                                                "id": "text19",
                                                "component": "WdText",
                                                "attributes": {
                                                  "level": "body-sm",
                                                  "maxLines": "1",
                                                  ":text": "$w.item_listView1.tips",
                                                  "style": {
                                                    "color": "white",
                                                    "padding": "2px 10px",
                                                    "marginLeft": "8px",
                                                    "borderRadius": "26px"
                                                  }
                                                },
                                                "directives": {
                                                  ":if": "!!$w.item_listView1.tips"
                                                },
                                                ":style": "({\n  background: 'var(--wd-color-error)'\n})",
                                                "extra": {
                                                  "attributeExtraData": {}
                                                }
                                              }
                                            ],
                                            "directives": {
                                              ":if": true
                                            },
                                            "extra": {
                                              "attributeExtraData": {}
                                            }
                                          },
                                          {
                                            "id": "text17",
                                            "component": "WdText",
                                            "attributes": {
                                              "level": "body-md",
                                              "maxLines": "3",
                                              "overflow": true,
                                              ":text": "$w.item_listView1.type !== 'gold_bean' ? $w.item_listView1.description : `${$w.item_listView1.gold_bean_count ? `${$w.item_listView1.gold_bean_count}金豆` : ''}${$w.item_listView1.give_gold_count ? ` + ${$w.item_listView1.give_gold_count}金豆` : ''}`",
                                              "style": {
                                                "color": "var(--wd-color-text-second)",
                                                "zIndex": 1,
                                                "position": "relative",
                                                "whiteSpace": "nowrap"
                                              }
                                            },
                                            "directives": {
                                              ":if": true
                                            },
                                            ":style": "({\n  color: $w.app.dataset.state.chargeStyle[$w.item_listView1.type]?.color || ($w.item_listView1.is_super ? 'var(--wd-color-text-inverse)' : 'var(--wd-color-text-second)')\n})",
                                            "extra": {
                                              "attributeExtraData": {}
                                            }
                                          },
                                          {
                                            "id": "image3",
                                            "component": "WdImage",
                                            "attributes": {
                                              "alt": "[图片]",
                                              "fit": "heightFix",
                                              "src": "/resources/2023-12/lowcode-1500287",
                                              "style": {
                                                "top": "-40px",
                                                "right": "-20px",
                                                "height": "170px",
                                                "position": "absolute"
                                              }
                                            },
                                            "directives": {
                                              ":if": "!$w.app.dataset.state.chargeStyle[$w.item_listView1.type]?.logo"
                                            },
                                            "extra": {
                                              "staticResourceAttribute": [
                                                "src"
                                              ],
                                              "attributeExtraData": {}
                                            }
                                          },
                                          {
                                            "id": "image4",
                                            "component": "WdImage",
                                            "attributes": {
                                              "alt": "[图片]",
                                              "fit": "heightFix",
                                              ":src": "$w.app.dataset.state.chargeStyle[$w.item_listView1.type]?.logo || '/resources/2023-12/lowcode-1500287'",
                                              "style": {
                                                "top": "0px",
                                                "right": "0px",
                                                "height": "100%",
                                                "position": "absolute"
                                              }
                                            },
                                            "directives": {
                                              ":if": "$w.app.dataset.state.chargeStyle[$w.item_listView1.type]?.logo"
                                            },
                                            "extra": {
                                              "staticResourceAttribute": [
                                                "src"
                                              ],
                                              "attributeExtraData": {}
                                            }
                                          }
                                        ],
                                        "listeners": [
                                          {
                                            "id": "wqz06xvzpy0",
                                            "eventName": "tap",
                                            "type": "platform",
                                            "handler": {
                                              "name": "utils.If",
                                              "module": "platform",
                                              "params": {
                                                "alternate": false,
                                                ":condition": "If($w.app.dataset.state.isIOS, true, false)",
                                                "consequent": true
                                              }
                                            },
                                            "isCapturePhase": false,
                                            "noPropagation": false
                                          },
                                          {
                                            "id": "wtqkid94onv",
                                            "eventName": "wqz06xvzpy0.success",
                                            "type": "platform",
                                            "handler": {
                                              "name": "showModal",
                                              "module": "platform",
                                              "params": {
                                                "cancelColor": "#000000",
                                                "cancelText": "取消",
                                                "confirmColor": "#8C6FFF",
                                                "confirmText": "确认",
                                                "content": "由于相关规范，IOS下该功能暂不可用",
                                                "showCancel": false,
                                                "title": "提示"
                                              }
                                            },
                                            "isCapturePhase": false,
                                            "noPropagation": false
                                          },
                                          {
                                            "id": "wswvk34puiy",
                                            "eventName": "wqz06xvzpy0.fail",
                                            "type": "general-func",
                                            "handler": {
                                              "name": "iife",
                                              "module": "general-func",
                                              ":code": "({event}) => {\n  let retryTimes = 0;\n  let timer = null;\n  $w.app.common.requestPayment({ target: $w.item_listView1 }, async () => {\n     if ($w.app.common.dealPayState({ type: 'get' }) === 'success') {\n      $w.utils.showLoading({ title: '请稍后...'})\n      await $w.queryBalance.trigger();\n      timer = setInterval(async () => {\n        if (retryTimes > 5) {\n          retryTimes = 0;\n          timer && clearInterval(timer);\n          return;\n        }\n        retryTimes += 1;\n        await $w.queryBalance.trigger();\n        await $w.app.common?.getVideoUserInfo?.();\n        if (retryTimes === 3) {\n          $w.utils.showToast({ title: '充值已到帐，如未更新请刷新重试', icon: 'none'})\n        }\n      }, 2000);\n      $w.app.common.dealPayState({ value: '' })\n    }\n  })\n}",
                                              "params": {}
                                            },
                                            "isCapturePhase": false,
                                            "noPropagation": false
                                          }
                                        ],
                                        "directives": {
                                          ":if": true
                                        },
                                        ":style": "({\n  background: $w.app.dataset.state.chargeStyle[$w.item_listView1.type]?.back || ($w.item_listView1.is_super ? 'linear-gradient(90deg, #9D6FFF -27.52%, #B79EFF 100%)' : '#E3E6EB')\n})",
                                        "scopedStyle": ":scope:hover {\n  opacity: .6;\n}",
                                        "extra": {}
                                      }
                                    ],
                                    "directives": {
                                      ":if": true
                                    },
                                    "extra": {
                                      "attributeExtraData": {}
                                    }
                                  }
                                ],
                                "directives": {
                                  ":if": true
                                },
                                "extra": {
                                  "attributeExtraData": {}
                                }
                              }
                            ],
                            "directives": {
                              ":if": true
                            },
                            "extra": {
                              "attributeExtraData": {}
                            }
                          }
                        ],
                        "directives": {
                          ":if": true
                        },
                        "extra": {
                          "attributeExtraData": {}
                        }
                      }
                    ],
                    "directives": {
                      ":if": "!$w.app.dataset.state.isIOS"
                    },
                    "extra": {
                      "attributeExtraData": {}
                    }
                  }
                ],
                "directives": {
                  ":if": true
                },
                "extra": {}
              },
              {
                "id": "footerSlot",
                "component": "",
                "attributes": {},
                "directives": {
                  ":if": false
                },
                "extra": {}
              }
            ],
            "listeners": [
              {
                "id": "w6ez2duppbe",
                "eventName": "open",
                "type": "platform",
                "handler": {
                  "name": "callQuery",
                  "module": "platform",
                  "params": {
                    "id": "queryCharge",
                    "method": "trigger"
                  }
                },
                "isCapturePhase": false,
                "noPropagation": false
              }
            ],
            "directives": {
              ":if": true
            },
            "extra": {
              "attributeExtraData": {}
            }
          },
          {
            "id": "container1",
            "label": "视频容器",
            "component": "Container",
            "attributes": {
              "style": {
                "height": "calc(100vh - 64px - env(safe-area-inset-bottom))",
                "position": "relative"
              }
            },
            "items": [
              {
                "id": "image2",
                "label": "封面图片",
                "component": "WdImage",
                "attributes": {
                  "alt": "[图片]",
                  "fit": "cover",
                  ":src": "$w.page.dataset.state.videoListShow?.front_pic_addr",
                  "style": {
                    "left": "0px",
                    "right": "0px",
                    "width": "100vw",
                    "height": "calc(-83px + 100vh)",
                    "zIndex": "1",
                    "position": "fixed"
                  }
                },
                "directives": {
                  ":display": "$w.page.dataset.state.isNoBalance"
                },
                "extra": {
                  "staticResourceAttribute": [
                    "src"
                  ],
                  "attributeExtraData": {}
                }
              },
              {
                "id": "video1",
                "component": "WedaVideo",
                "attributes": {
                  "endTime": 0,
                  "loopPlay": true,
                  ":posterImage": "$w.page.dataset.state.videoListShow?.front_pic_addr",
                  ":videoDataSource": "$w.page.dataset.state.videoListShow?.isNoBalance ? '' : ($w.page.dataset.state.videoListShow?.display_url || '')",
                  "style": {
                    "height": "calc(100vh - 64px - env(safe-area-inset-bottom))"
                  }
                },
                "listeners": [
                  {
                    "id": "wx6xveydk61",
                    "eventName": "play",
                    "type": "platform",
                    "handler": {
                      "name": "utils.If",
                      "module": "platform",
                      "params": {
                        "alternate": false,
                        ":condition": "If($w.page.dataset.state.videoListShow?.isNoBalance, true, false)",
                        "consequent": true
                      }
                    },
                    "isCapturePhase": false,
                    "noPropagation": false
                  },
                  {
                    "id": "wbkf3ktjlza",
                    "eventName": "wx6xveydk61.success",
                    "type": "platform",
                    "handler": {
                      "name": "invoke",
                      "module": "platform",
                      "params": {
                        "component": "modal1"
                      }
                    },
                    "isCapturePhase": false,
                    "noPropagation": false
                  },
                  {
                    "id": "wssbhh4cj74",
                    "eventName": "ended",
                    "type": "rematch",
                    "handler": {
                      "name": "videoChange",
                      "module": "recommend",
                      "params": {
                        ":target": "true"
                      }
                    },
                    "isCapturePhase": false,
                    "noPropagation": false
                  }
                ],
                "directives": {
                  ":display": "!$w.page.dataset.state.isNoBalance"
                },
                "extra": {
                  "staticResourceAttribute": [
                    "posterImage"
                  ],
                  "attributeExtraData": {}
                }
              },
              {
                "id": "container3",
                "component": "Container",
                "attributes": {
                  "style": {
                    "left": "20px",
                    "bottom": "50px",
                    "zIndex": "101",
                    "display": "flex",
                    "position": "absolute",
                    "flexDirection": "column"
                  }
                },
                "items": [
                  {
                    "id": "text1",
                    "component": "WdText",
                    "attributes": {
                      "level": "title-9",
                      "maxLines": "1",
                      ":text": "($w.page.dataset.state.videoListShow?.title || '') + ' - 第' + ($w.page.dataset.state.videoListShow?.series_number || '-') + '集'",
                      "style": {
                        "color": "rgb(255, 255, 255)",
                        "maxWidth": "240px",
                        "textAlign": "left"
                      }
                    },
                    "directives": {
                      ":if": true
                    },
                    "extra": {
                      "attributeExtraData": {}
                    }
                  },
                  {
                    "id": "text4",
                    "component": "WdText",
                    "attributes": {
                      "level": "body-md",
                      "maxLines": "1",
                      ":text": "$w.page.dataset.state.videoListShow?.video_id.introduce || ''",
                      "style": {
                        "color": "rgb(255, 255, 255)",
                        "maxWidth": "240px",
                        "textAlign": "left"
                      },
                      "class": "ellipsis--three"
                    },
                    "directives": {
                      ":if": true
                    },
                    "extra": {
                      "attributeExtraData": {}
                    }
                  }
                ],
                "directives": {
                  ":if": true
                },
                "extra": {}
              },
              {
                "id": "container2",
                "component": "Container",
                "attributes": {
                  "style": {
                    "right": "10px",
                    "width": "auto",
                    "bottom": "100px",
                    "height": "auto",
                    "zIndex": "101",
                    "display": "flex",
                    "position": "absolute",
                    "alignItems": "center",
                    "flexDirection": "column"
                  }
                },
                "items": [
                  {
                    "id": "icon4",
                    "label": "点赞图标",
                    "component": "WdIcon",
                    "attributes": {
                      "name": "success",
                      "size": "lg",
                      ":src": "$w.page.dataset.state.operateCache[`${$w.page.dataset.state.videoListShow?.video_id?._id}-${$w.page.dataset.state.videoListShow?.series_number}`]?.isLike ? 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCAzNiAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIuNzAwMDEgMTMuMjg0NEMyLjcwMDAxIDUuNjU2MSAxMS41MzI4IDEuNjY3MDQgMTcuMDEwMiA2LjgyMTdMMTggNy43NTMyTDE4Ljk4OTggNi44MjE3QzI0LjQ2NzIgMS42NjcwNCAzMy4zIDUuNjU2MSAzMy4zIDEzLjI4NDRDMzMuMyAxNS42MDk2IDMyLjQwMDMgMTcuODM5NiAzMC43OTg4IDE5LjQ4MzhMMTguMzcxNiAzMi4yNDJDMTguMTY2NCAzMi40NTI3IDE3LjgzMzcgMzIuNDUyNyAxNy42Mjg1IDMyLjI0Mkw1LjIwMTIzIDE5LjQ4MzhDMy41OTk3MyAxNy44Mzk2IDIuNzAwMDEgMTUuNjA5NiAyLjcwMDAxIDEzLjI4NDRaIiBmaWxsPSIjRkYyQzVGIiBmaWxsLW9wYWNpdHk9IjAuOSIvPgo8L3N2Zz4K': 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCAzNiAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIuNjk5OTUgMTMuMjg0NEMyLjY5OTk1IDUuNjU2MSAxMS41MzI4IDEuNjY3MDQgMTcuMDEwMSA2LjgyMTdMMTggNy43NTMyTDE4Ljk4OTggNi44MjE3QzI0LjQ2NzEgMS42NjcwNCAzMy4yOTk5IDUuNjU2MSAzMy4yOTk5IDEzLjI4NDRDMzMuMjk5OSAxNS42MDk2IDMyLjQwMDIgMTcuODM5NiAzMC43OTg3IDE5LjQ4MzhMMTguMzcxNSAzMi4yNDJDMTguMTY2MyAzMi40NTI3IDE3LjgzMzYgMzIuNDUyNyAxNy42Mjg0IDMyLjI0Mkw1LjIwMTE3IDE5LjQ4MzhDMy41OTk2NyAxNy44Mzk2IDIuNjk5OTUgMTUuNjA5NiAyLjY5OTk1IDEzLjI4NDRaIiBmaWxsPSJ3aGl0ZSIgZmlsbC1vcGFjaXR5PSIwLjkiLz4KPC9zdmc+Cg=='",
                      "type": "custom",
                      "style": {
                        "width": "36px",
                        "height": "36px"
                      },
                      "class": "video-operate-icon"
                    },
                    "listeners": [
                      {
                        "id": "wkckfiy0ihf",
                        "eventName": "tap",
                        "type": "platform",
                        "handler": {
                          "name": "cloud.callDataSource",
                          "module": "platform",
                          "params": {
                            "dataSourceName": "zdydm_xyqe7jc",
                            "methodName": "method_a39de228b1eda11",
                            "options": {
                              "showToast": false,
                              "showLoading": true
                            },
                            "outputs": "",
                            "params": {
                              ":operate_type": "`${$w.page.dataset.state.operateCache[`${$w.page.dataset.state.videoListShow?.video_id?._id}-${$w.page.dataset.state.videoListShow?.series_number}`].isLike ? 2 : 1}`",
                              ":section_id": "$w.page.dataset.state.videoListShow?._id"
                            }
                          }
                        },
                        "isCapturePhase": false,
                        "noPropagation": false
                      },
                      {
                        "id": "w48y8avst31",
                        "eventName": "wkckfiy0ihf.success",
                        "type": "rematch",
                        "handler": {
                          "name": "videoOperate",
                          "module": "recommend",
                          "params": {
                            ":target": "({video_id: $w.page.dataset.state.videoListShow?.video_id?._id, series_number: $w.page.dataset.state.videoListShow?.series_number, type: 'like'})"
                          }
                        },
                        "isCapturePhase": false,
                        "noPropagation": false
                      }
                    ],
                    "directives": {
                      ":if": true
                    },
                    "extra": {
                      "staticResourceAttribute": [
                        "src"
                      ],
                      "attributeExtraData": {}
                    }
                  },
                  {
                    "id": "text10",
                    "label": "点赞文本",
                    "component": "WdText",
                    "attributes": {
                      "maxLines": "1",
                      ":text": "$w.page.dataset.state.operateCache[`${$w.page.dataset.state.videoListShow?.video_id?._id}-${$w.page.dataset.state.videoListShow?.series_number}`]?.like_count || 0",
                      "style": {
                        "color": "rgb(255, 255, 255)",
                        "fontSize": "14",
                        "marginBottom": 10
                      }
                    },
                    "directives": {
                      ":if": true
                    },
                    "extra": {
                      "attributeExtraData": {}
                    }
                  },
                  {
                    "id": "icon1",
                    "label": "追剧图标",
                    "component": "WdIcon",
                    "attributes": {
                      "name": "success",
                      "size": "lg",
                      ":src": "$w.queryVideoDetail.data?.records?.find(v => v._id === $w.page.dataset.state.videoListShow?.video_id._id)?.video_follow_id?.length > 0 ? '/resources/2023-11/lowcode-1498018' : '/resources/2023-11/lowcode-1498069'",
                      "type": "custom",
                      "class": "video-operate-icon"
                    },
                    "listeners": [
                      {
                        "id": "we323fb3wsc",
                        "eventName": "tap",
                        "type": "platform",
                        "handler": {
                          "name": "utils.If",
                          "module": "platform",
                          "params": {
                            "alternate": false,
                            ":condition": "If(($w.queryVideoDetail.data?.records?.find(v => v._id === $w.page.dataset.state.videoListShow?.video_id._id)?.video_follow_id?.length > 0), true, false)",
                            "consequent": true
                          }
                        },
                        "isCapturePhase": false,
                        "noPropagation": false
                      },
                      {
                        "id": "wgwc93ktvd2",
                        "eventName": "we323fb3wsc.success",
                        "type": "platform",
                        "handler": {
                          "name": "cloud.callDataSource",
                          "module": "platform",
                          "params": {
                            "dataSourceName": "playlet_user_follow_b9g5hjw",
                            "methodName": "wedaBatchDeleteV2",
                            "options": {
                              "showToast": false,
                              "showLoading": true
                            },
                            "outputs": {},
                            "params": {
                              "select": {
                                "$master": true
                              },
                              ":filter": "{\n \"where\": {\n  \"$and\": [\n   {\n    \"$and\": [\n     {\n      \"video_id\": {\n       \"$eq\": $w.page.dataset.state.videoListShow?.video_id._id\n      }\n     },\n     {\n      \"user_id\": {\n       \"$eq\": $w.app.dataset.state.videoUserInfo._id\n      }\n     }\n    ]\n   }\n  ]\n },\n \"relateWhere\": {}\n}"
                            }
                          }
                        },
                        "isCapturePhase": false,
                        "noPropagation": false
                      },
                      {
                        "id": "wt9g061nsql",
                        "eventName": "wgwc93ktvd2.success",
                        "type": "platform",
                        "handler": {
                          "name": "callQuery",
                          "module": "platform",
                          "params": {
                            "id": "queryVideoDetail",
                            "method": "trigger"
                          }
                        },
                        "isCapturePhase": false,
                        "noPropagation": false
                      },
                      {
                        "id": "wmpuyi4hscn",
                        "eventName": "we323fb3wsc.fail",
                        "type": "platform",
                        "handler": {
                          "name": "cloud.callDataSource",
                          "module": "platform",
                          "params": {
                            "dataSourceName": "playlet_user_follow_b9g5hjw",
                            "methodName": "wedaCreateV2",
                            "options": {
                              "showToast": false,
                              "showLoading": true
                            },
                            "outputs": {},
                            "params": {
                              "data": {
                                ":user_id": "({_id: $w.app.dataset.state.videoUserInfo._id})",
                                ":video_id": "({_id: $w.page.dataset.state.videoListShow?.video_id._id})"
                              },
                              "select": {
                                "$master": true
                              }
                            }
                          }
                        },
                        "isCapturePhase": false,
                        "noPropagation": false
                      },
                      {
                        "id": "wv2cqbhkkpe",
                        "eventName": "wmpuyi4hscn.success",
                        "type": "platform",
                        "handler": {
                          "name": "callQuery",
                          "module": "platform",
                          "params": {
                            "id": "queryVideoDetail",
                            "method": "trigger"
                          }
                        },
                        "isCapturePhase": false,
                        "noPropagation": false
                      }
                    ],
                    "directives": {
                      ":if": false,
                      ":display": false
                    },
                    ":style": "({\n  color: $w.page.dataset.state.videoListShow?.liked ? 'rgba(255, 2, 52, .8)' : 'rgba(255, 255, 255, .8)'\n})",
                    "extra": {
                      "staticResourceAttribute": [
                        "src"
                      ],
                      "attributeExtraData": {}
                    }
                  },
                  {
                    "id": "text2",
                    "label": "追剧文本",
                    "component": "WdText",
                    "attributes": {
                      "maxLines": "1",
                      "text": "追剧",
                      "style": {
                        "color": "rgb(255, 255, 255)",
                        "fontSize": "14",
                        "marginBottom": 16
                      }
                    },
                    "directives": {
                      ":if": false,
                      ":display": false
                    },
                    "extra": {
                      "attributeExtraData": {}
                    }
                  },
                  {
                    "id": "button1",
                    "component": "WdButton",
                    "attributes": {
                      "icon": "success",
                      "iconSource": "custom",
                      "iconSrc": "/resources/2023-11/lowcode-1498071",
                      "iconType": "text-with-icon",
                      "openType": "share",
                      "text": "分享",
                      "variant": "text",
                      "style": {
                        "border": "none",
                        "display": "flex",
                        "padding": "0px",
                        "alignItems": "center",
                        "marginBottom": "16px",
                        "flexDirection": "column",
                        "justifyContent": "center"
                      }
                    },
                    "directives": {
                      ":if": true
                    },
                    "scopedStyle": ":scope .wd-btn__icon {\n  height: 36px;\n  width: 36px;\n  margin-right: 0;\n  margin-bottom: 0;\n}\n:scope .wd-btn__text {\n  font-size: 14px;\n  color: #fff;\n}\n:scope .wd-btn--text:hover:not(.is-disabled), .wd-btn--text.wd-btn--primary:hover:not(.is-disabled) {\n  background-color: unset !important;\n  border-color: unset !important;\n  border: none !important;\n}\n:scope .wd-btn--text:active:not(.is-disabled) {\n  background-color: unset !important;\n  border-color: unset !important;\n  border: none !important;\n}",
                    "extra": {
                      "staticResourceAttribute": [
                        "sendMessageImg",
                        "iconSrc"
                      ],
                      "attributeExtraData": {}
                    }
                  },
                  {
                    "id": "icon2",
                    "component": "WdIcon",
                    "attributes": {
                      "size": "lg",
                      "src": "/resources/2023-11/lowcode-1498070",
                      "type": "custom",
                      "class": "video-operate-icon"
                    },
                    "listeners": [
                      {
                        "id": "wanlj7zk7pj",
                        "eventName": "tap",
                        "type": "general-func",
                        "handler": {
                          "name": "iife",
                          "module": "general-func",
                          ":code": "({event}) => {\n  $w.app.common.getPlayerManager().navigateToPlayer({\n    dramaId: $w.page.dataset.state.videoListShow?.video_id?.drama_id,\n    serialNo: $w.page.dataset.state.videoListShow?.series_number\n  })\n}",
                          "params": {}
                        },
                        "isCapturePhase": false,
                        "noPropagation": false
                      }
                    ],
                    "directives": {
                      ":if": true
                    },
                    ":style": "({\n  color: $w.page.dataset.state.videoListShow?.collected ? 'rgba(255, 196, 0, .8)' : 'rgba(255, 255, 255, .8)'\n})",
                    "extra": {
                      "staticResourceAttribute": [
                        "src"
                      ],
                      "attributeExtraData": {}
                    }
                  },
                  {
                    "id": "text3",
                    "component": "WdText",
                    "attributes": {
                      "maxLines": "1",
                      "text": "选集",
                      "style": {
                        "color": "rgb(255, 255, 255)",
                        "fontSize": "14",
                        "marginBottom": 10
                      }
                    },
                    "directives": {
                      ":if": true
                    },
                    "extra": {
                      "attributeExtraData": {}
                    }
                  }
                ],
                "directives": {
                  ":if": true
                },
                "extra": {}
              }
            ],
            "listeners": [
              {
                "id": "w1h5gu7svr8",
                "eventName": "touchstart",
                "type": "rematch",
                "handler": {
                  "name": "ratePlay",
                  "module": "recommend",
                  "params": {
                    "target": "start"
                  }
                },
                "isCapturePhase": false,
                "noPropagation": false
              },
              {
                "id": "wc7urcmmuso",
                "eventName": "touchend",
                "type": "rematch",
                "handler": {
                  "name": "ratePlay",
                  "module": "recommend",
                  "params": {
                    "target": "end"
                  }
                },
                "isCapturePhase": false,
                "noPropagation": false
              },
              {
                "id": "wsuuupmfv0g",
                "eventName": "touchmove",
                "type": "rematch",
                "handler": {
                  "name": "ratePlay",
                  "module": "recommend",
                  "params": {
                    "target": "move"
                  }
                },
                "isCapturePhase": false,
                "noPropagation": false
              }
            ],
            "directives": {
              ":if": true
            },
            "extra": {}
          }
        ],
        "directives": {
          ":if": true
        },
        "extra": {}
      }
    ],
    "directives": {
      ":if": true
    },
    "extra": {}
  }
]